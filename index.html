
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Information Filter of Wikipedia</title>
    <script src="libraries/p5.js" type="text/javascript"></script>
    <!--<script language="javascript" type="text/javascript" src="//cdn.jsdelivr.net/p5.js/0.3.6/p5.min.js"></script>-->

    <script src="libraries/p5.dom.js" type="text/javascript"></script>
    <script src="libraries/p5.sound.js" type="text/javascript"></script>
    <script src="sketch.js" type="text/javascript"></script>

    <link href="css/style.css" rel="stylesheet">
    <link title="timeline-styles" rel="stylesheet" href="//cdn.knightlab.com/libs/timeline3/latest/css/timeline.css">
    <script src="//cdn.knightlab.com/libs/timeline3/latest/js/timeline.js"></script>

    <div id='timeline-embed' style="width: 100%; height: 600px"></div>

  <body>

    <div class="container">
      <div class="container-fluid" style="padding:20px">
        <h1>Information Filter of Wikipedia</h1>
          <!--<p>-->
          <!--  <a href="http://developer.nytimes.com">NY Times Developer API</a>-->
          <!--</p>-->
      </div>

      <!-- <div class="container-fluid" style="padding:20px">
        <h3> Type a name
          <h5> Name:
            <input id = "search" value="Albert Einstein"></input>
            <button type="button" id = "submit">
              search
            </button>
          </h5>
        </h3>
      </div>
       -->
      <form id="foo">
      <p><label for="name">Name:</label>
      <input id="name" name="name" type="text" value=""></p>
      <p><label for="comment">Comment:</label><br>
      <textarea id="comment" name="comment" cols="40"></textarea></p>
      <p id="result"><a href="https://docs.google.com/spreadsheets/d/10tt64TiALYhPMqR2fh9JzkuhxW7oC0rXXPb_pmJ7HAY/edit?usp=sharing" target="_blank">Success - see Google Sheet</a></p>
      <input type="submit" value="Send">
      </form>
      <script data-cfasync="false" type="text/javascript">
      jQuery( document ).ready(function( $ ) {
      	// variable to hold request
      	var request;
      	// bind to the submit event of our form
      	$("#foo").submit(function(event){
      		// abort any pending request
      		if (request) {
      			request.abort();
      		}
      		// setup some local variables
      		var $form = $(this);
      		// let's select and cache all the fields
      		var $inputs = $form.find("input, select, button, textarea");
      		// serialize the data in the form
      		var serializedData = $form.serialize();

      		// let's disable the inputs for the duration of the ajax request
      		// Note: we disable elements AFTER the form data has been serialized.
      		// Disabled form elements will not be serialized.
      		$inputs.prop("disabled", true);
      		$('#result').text('Sending data...');

      		// fire off the request to /form.php
      		request = $.ajax({
      			url: "https://script.google.com/macros/s/AKfycbzV--xTooSkBLufMs4AnrCTdwZxVNtycTE4JNtaCze2UijXAg8/exec",
      			type: "post",
      			data: serializedData
      		});

      		// callback handler that will be called on success
      		request.done(function (response, textStatus, jqXHR){
      			// log a message to the console
      			$('#result').html('<a href="https://docs.google.com/spreadsheets/d/10tt64TiALYhPMqR2fh9JzkuhxW7oC0rXXPb_pmJ7HAY/edit?usp=sharing" target="_blank">Success - see Google Sheet</a>');
      			console.log("Hooray, it worked!");
      		});

      		// callback handler that will be called on failure
      		request.fail(function (jqXHR, textStatus, errorThrown){
      			// log the error to the console
      			console.error(
      				"The following error occured: "+
      				textStatus, errorThrown
      			);
      		});

      		// callback handler that will be called regardless
      		// if the request failed or succeeded
      		request.always(function () {
      			// reenable the inputs
      			$inputs.prop("disabled", false);
      		});

      		// prevent default posting of form
      		event.preventDefault();
      	});
      });
      </script>

    </div>
  </body>
</html>
